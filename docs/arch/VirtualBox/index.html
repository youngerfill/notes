<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>Installing Arch Linux in VirtualBox</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
</head>
<body>
    <div id="header">
        <div class="nav">
            <div class="path">
                <a href="../../index.html">notes</a> &#47;
                <a href="../index.html">arch</a> &#47;
                <a href=""> Installing Arch Linux in VirtualBox </a>
            </div>

    
    
    
    
        </div>
        
            <div class="timestamp" title="Last modified">
                2018-11-26 08:04:36 UTC
            </div>
    
        <div class="tags">
            <a href="../../tags/arch/index.html" title="tag"> arch </a>
                |
            <a href="../../tags/VirtualBox/index.html" title="tag"> VirtualBox </a>
        </div>

    </div>

    <div id="document">
        <div class="section" id="installing-arch-linux-in-virtualbox">
<h1>Installing Arch Linux in VirtualBox</h1>
<div class="section" id="arch-linux-iso-file">
<h2>1. Arch Linux .iso file</h2>
<dl class="docutils">
<dt>archlinux-2018.02.01-x86_64.iso</dt>
<dd>from: <a class="reference external" href="https://archlinux.cu.be/iso/2018.02.01/archlinux-2018.02.01-x86_64.iso">https://archlinux.cu.be/iso/2018.02.01/archlinux-2018.02.01-x86_64.iso</a>
saved at: “M:vmisoarchlinux-2018.02.01-x86_64.iso”</dd>
</dl>
</div>
<div class="section" id="virtualbox">
<h2>2. VirtualBox:</h2>
<ul>
<li><dl class="first docutils">
<dt>This document applies to v5.2.6</dt>
<dd><ul class="first last simple">
<li>Help/About VirtualBox</li>
<li>File/Check for updates</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>in File/Preferences:</dt>
<dd><ul class="first last simple">
<li>General: check vm default location: “M:vm”</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>in File/Host Network Manager:</dt>
<dd><ul class="first last simple">
<li><dl class="first docutils">
<dt>Create host-only network</dt>
<dd><ul class="first last">
<li>Set the IP address, e.g. : 192.168.236.2</li>
<li>Network mask : 255.255.255.0</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>new vm</dt>
<dd><ul class="first last simple">
<li><dl class="first docutils">
<dt>name: yeba</dt>
<dd><ul class="first last">
<li>make sure “M:vmyeba” doesn’t exist before creation of VM</li>
</ul>
</dd>
</dl>
</li>
<li>type/version: arch linux 64 bit</li>
<li>memory 4096 MB</li>
<li>create virtual HD</li>
<li>press “create”</li>
<li>File size 30 GB</li>
<li>VDI</li>
<li>dynamically allocated</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">“yeba” (powered off) appears in list of VMs</p>
</li>
<li><p class="first">yeba Settings:</p>
<blockquote>
<div><ul class="simple">
<li>General/Advanced: shared clipboard: bidirectional</li>
<li><dl class="first docutils">
<dt>System/Motherboard:</dt>
<dd><ul class="first last">
<li>Boot order: Optical, Harddisk</li>
<li><dl class="first docutils">
<dt>Extended features:</dt>
<dd><ul class="first last">
<li>disable I/O APIC</li>
<li>disable EFI</li>
<li>enable HW clock in UTC time</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Storage:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>IDE secondary master: “M:vmisoarchlinux-2018.02.01-x86_64.iso”</dt>
<dd><ul class="first last">
<li>don’t enable LiveCD/DVD</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>SATA: add hard disk</dt>
<dd><ul class="first last">
<li>new hard disk</li>
<li>VDI, dynamically allocated, 100 GB</li>
<li>M:vmhddLargeData.vdi</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Network:</dt>
<dd><ul class="first last">
<li>Adapter 1 : NAT</li>
<li>Adapter 2 : Host-only, name: the one just created in File/Preferences</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Shared Folders:</dt>
<dd><ul class="first last">
<li>“C:\Bert\vm\pub”</li>
<li>“M:\mshare”</li>
<li>auto-mount, full access</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="from-livecd-to-working-root-login">
<h2>3. From LiveCD to working root login:</h2>
<p>start VM</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">loadkeys</span> <span class="n">be</span><span class="o">-</span><span class="n">latin1</span>
</pre></div>
</div>
<p>Network should work:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="n">www</span><span class="o">.</span><span class="n">google</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
<p>Syncronize the system clock with NTP</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">timedatectl</span> <span class="nb">set</span><span class="o">-</span><span class="n">ntp</span> <span class="n">true</span>
</pre></div>
</div>
<p>Create partition table</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fdisk</span> <span class="o">-</span><span class="n">l</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda</span>

<span class="n">fdisk</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda</span>
    <span class="o">--&gt;</span> <span class="n">n</span> <span class="p">:</span> <span class="n">new</span> <span class="n">partition</span>
    <span class="o">--&gt;</span> <span class="n">p</span> <span class="p">:</span> <span class="n">primary</span> <span class="n">partition</span>
    <span class="o">--&gt;</span> <span class="n">enter</span> <span class="p">:</span> <span class="n">partition</span> <span class="c1">#1</span>
    <span class="o">--&gt;</span> <span class="n">enter</span> <span class="p">:</span> <span class="n">default</span> <span class="n">first</span> <span class="n">sector</span>
    <span class="o">--&gt;</span> <span class="n">enter</span> <span class="p">:</span> <span class="n">default</span> <span class="n">last</span> <span class="n">sector</span>
    <span class="o">--&gt;</span> <span class="n">w</span> <span class="n">write</span> <span class="n">partition</span> <span class="n">table</span>
</pre></div>
</div>
<p>Format the partition</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkfs</span><span class="o">.</span><span class="n">ext4</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda1</span>
</pre></div>
</div>
<p>Mount the partition</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mount</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda1</span> <span class="o">/</span><span class="n">mnt</span>
</pre></div>
</div>
<p>Make sure nearest mirror is first in the list</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vi</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">pacman</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">mirrorlist</span>
</pre></div>
</div>
<p>Install the ‘base’ package group</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pacstrap</span> <span class="o">/</span><span class="n">mnt</span> <span class="n">base</span>
</pre></div>
</div>
<p>Create an fstab file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">genfstab</span> <span class="o">-</span><span class="n">U</span> <span class="o">/</span><span class="n">mnt</span> <span class="o">&gt;&gt;</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">fstab</span>
</pre></div>
</div>
<p>‘chroot’ into the newly created system</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">arch</span><span class="o">-</span><span class="n">chroot</span> <span class="o">/</span><span class="n">mnt</span>
</pre></div>
</div>
<p>Set the timezone</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">zoneinfo</span><span class="o">/</span><span class="n">Europe</span><span class="o">/</span><span class="n">Brussels</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">localtime</span>
</pre></div>
</div>
<p>Use UTC in hardware clock. Initialize the hardware clock from
current system time.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hwclock</span> <span class="o">--</span><span class="n">systohc</span> <span class="o">--</span><span class="n">utc</span>
</pre></div>
</div>
<p>Use US locale</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="n">en_US</span><span class="o">.</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span> <span class="n">UTF</span><span class="o">-</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">locale</span><span class="o">.</span><span class="n">gen</span>
<span class="n">locale</span><span class="o">-</span><span class="n">gen</span>
<span class="n">echo</span> <span class="n">LANG</span><span class="o">=</span><span class="n">en_US</span><span class="o">.</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">locale</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>Use Belgian keymap</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="n">KEYMAP</span><span class="o">=</span><span class="n">be</span><span class="o">-</span><span class="n">latin1</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">vconsole</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>Set hostname</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="n">yeba</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">hostname</span>
</pre></div>
</div>
<p>Set localhost alias</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vi</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">hosts</span>
</pre></div>
</div>
<p>In /etc/hosts, add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span> <span class="n">yeba</span><span class="o">.</span><span class="n">localdomain</span> <span class="n">yeba</span>
</pre></div>
</div>
<p>Set password</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">passwd</span>
</pre></div>
</div>
<p>Install boot loader ‘grub’</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pacman</span> <span class="o">-</span><span class="n">Syu</span> <span class="n">grub</span>
<span class="n">grub</span><span class="o">-</span><span class="n">install</span> <span class="o">--</span><span class="n">target</span><span class="o">=</span><span class="n">i386</span><span class="o">-</span><span class="n">pc</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda</span> <span class="o">&amp;&amp;</span> <span class="n">grub</span><span class="o">-</span><span class="n">mkconfig</span> <span class="o">-</span><span class="n">o</span> <span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">grub</span><span class="o">/</span><span class="n">grub</span><span class="o">.</span><span class="n">cfg</span>
</pre></div>
</div>
<p>Leave chroot environment and shutdown VM</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">exit</span>
<span class="n">shutdown</span> <span class="n">now</span>
</pre></div>
</div>
<p>in settings of VM: Remove disk from virtual drive</p>
<p>start VM</p>
<blockquote>
<div><strong>**</strong> snapshot : Fresh install <strong>**</strong></div></blockquote>
</div>
<div class="section" id="a-one-user-system">
<h2>4. A one-user system:</h2>
<p>Add a non-root user, with ‘sudo’ rights</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">useradd</span> <span class="o">-</span><span class="n">m</span> <span class="n">bert</span>
<span class="n">groupadd</span> <span class="n">sudoers</span>
<span class="n">usermod</span> <span class="o">-</span><span class="n">aG</span> <span class="n">sudoers</span> <span class="n">bert</span>
<span class="n">passwd</span> <span class="n">bert</span>
</pre></div>
</div>
<p>enable NW-ing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">enable</span> <span class="n">dhcpcd</span><span class="nd">@enp0s3</span><span class="o">.</span><span class="n">service</span>
<span class="n">systemctl</span> <span class="n">start</span> <span class="n">dhcpcd</span><span class="nd">@enp0s3</span><span class="o">.</span><span class="n">service</span>
</pre></div>
</div>
<p>check connection:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="n">www</span><span class="o">.</span><span class="n">google</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
<p>Install ‘sudo’</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pacman</span> <span class="o">-</span><span class="n">Syu</span> <span class="n">sudo</span>
</pre></div>
</div>
<p>allow group ‘sudoers’ to use sudo (in conf file):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">visudo</span>
</pre></div>
</div>
<p>–&gt; add line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">sudoers</span>    <span class="n">ALL</span><span class="o">=</span><span class="p">(</span><span class="n">ALL</span><span class="p">)</span> <span class="n">ALL</span>
</pre></div>
</div>
<p>log out of root session:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">exit</span>
</pre></div>
</div>
<p>log back in as bert</p>
<p>test if sudo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">v</span>
</pre></div>
</div>
<p>(after entering password should not output anything if all is well)</p>
<blockquote>
<div><strong>**</strong> snapshot : User bert, NW OK <strong>**</strong></div></blockquote>
</div>
<div class="section" id="virtualbox-guest-additions">
<h2>5. Virtualbox Guest Additions</h2>
<p>Make sure your version of Virtualbox matches the version of the Guest Additions:</p>
<blockquote>
<div><dl class="docutils">
<dt>. VirtualBox:</dt>
<dd>. Help/About VirtualBox
. File/Check for updates</dd>
</dl>
<p>. Arch Linux guest OS:</p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pacman</span> <span class="o">-</span><span class="n">Ss</span> <span class="n">virtualbox</span><span class="o">-</span><span class="n">guest</span><span class="o">-</span><span class="n">utils</span>
</pre></div>
</div>
<p>Install guest additions &amp; hwinfo</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">pacman</span> <span class="o">-</span><span class="n">Syu</span> <span class="n">virtualbox</span><span class="o">-</span><span class="n">guest</span><span class="o">-</span><span class="n">utils</span> <span class="n">hwinfo</span>
</pre></div>
</div>
<p>During installation, choose package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">virtualbox</span><span class="o">-</span><span class="n">guest</span><span class="o">-</span><span class="n">modules</span><span class="o">-</span><span class="n">arch</span>
</pre></div>
</div>
<p>Enable the service</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">systemctl</span> <span class="n">enable</span> <span class="n">vboxservice</span><span class="o">.</span><span class="n">service</span>
</pre></div>
</div>
<p>output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">created</span> <span class="n">symlink</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">multi</span><span class="o">-</span><span class="n">user</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">wants</span><span class="o">/</span><span class="n">vboxservice</span><span class="o">.</span><span class="n">service</span>
<span class="o">-&gt;</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">vboxservice</span><span class="o">.</span><span class="n">service</span><span class="o">.</span>
</pre></div>
</div>
<p>Start the service</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">systemctl</span> <span class="n">start</span> <span class="n">vboxservice</span><span class="o">.</span><span class="n">service</span>
</pre></div>
</div>
<p>Reboot VM</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">reboot</span> <span class="n">now</span>
</pre></div>
</div>
<p>And log in again</p>
<p>Grant access to shared folders</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">chmod</span> <span class="mi">755</span> <span class="o">/</span><span class="n">media</span>
<span class="n">sudo</span> <span class="n">usermod</span> <span class="o">-</span><span class="n">aG</span> <span class="n">vboxsf</span> <span class="n">bert</span>
</pre></div>
</div>
<p>Logout and -in for the latter change to take effect</p>
<blockquote>
<div><strong>**</strong> snapshot : vbox guest additions <strong>**</strong></div></blockquote>
</div>
<div class="section" id="lots-of-packages">
<h2>6. Lots of packages</h2>
<p>Install some necessary packages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">pacman</span> <span class="o">-</span><span class="n">Syu</span> <span class="n">base</span><span class="o">-</span><span class="n">devel</span> <span class="n">clang</span> <span class="n">git</span> <span class="n">vim</span> <span class="n">tmux</span> <span class="n">time</span> <span class="nb">zip</span> <span class="n">unzip</span> <span class="n">dialog</span> <span class="n">wget</span> <span class="n">dos2unix</span> <span class="n">hwinfo</span> <span class="n">openssh</span> <span class="n">knockd</span> <span class="n">lighttpd</span> <span class="n">ffmpeg</span> <span class="n">python</span><span class="o">-</span><span class="n">mako</span> <span class="n">python</span><span class="o">-</span><span class="n">sphinx</span> <span class="n">asciidoc</span>
</pre></div>
</div>
<p>Install xorg-related packages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">pacman</span> <span class="o">-</span><span class="n">Syu</span> <span class="n">xorg</span><span class="o">-</span><span class="n">server</span> <span class="n">xorg</span><span class="o">-</span><span class="n">xinit</span> <span class="n">xorg</span><span class="o">-</span><span class="n">apps</span> <span class="n">xorg</span><span class="o">-</span><span class="n">apps</span> <span class="n">xorg</span><span class="o">-</span><span class="n">xfontsel</span> <span class="n">xorg</span><span class="o">-</span><span class="n">fonts</span><span class="o">-</span><span class="n">misc</span> <span class="n">unclutter</span> <span class="n">dmenu</span> <span class="n">ttf</span><span class="o">-</span><span class="n">dejavu</span> <span class="n">ttf</span><span class="o">-</span><span class="n">inconsolata</span> <span class="n">adobe</span><span class="o">-</span><span class="n">source</span><span class="o">-</span><span class="n">code</span><span class="o">-</span><span class="n">pro</span><span class="o">-</span><span class="n">fonts</span>
</pre></div>
</div>
<p>The 2 previous commands can be combined by pasting all package names in a text file in a vboxsf shared folder and running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">pacman</span> <span class="o">-</span><span class="n">Syu</span> <span class="o">-</span> <span class="o">&lt;</span> <span class="o">/</span><span class="n">media</span><span class="o">/</span><span class="n">sf_pub</span><span class="o">/</span><span class="n">packages</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>Install dwm from AUR:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">L</span> <span class="o">-</span><span class="n">O</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">aur</span><span class="o">.</span><span class="n">archlinux</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">cgit</span><span class="o">/</span><span class="n">aur</span><span class="o">.</span><span class="n">git</span><span class="o">/</span><span class="n">snapshot</span><span class="o">/</span><span class="n">st</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">L</span> <span class="o">-</span><span class="n">O</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">aur</span><span class="o">.</span><span class="n">archlinux</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">cgit</span><span class="o">/</span><span class="n">aur</span><span class="o">.</span><span class="n">git</span><span class="o">/</span><span class="n">snapshot</span><span class="o">/</span><span class="n">dwm</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>

<span class="n">tar</span> <span class="n">xzvf</span> <span class="n">st</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">tar</span> <span class="n">xzvf</span> <span class="n">dwm</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>

<span class="n">cd</span> <span class="n">st</span> <span class="o">&amp;&amp;</span> <span class="n">makepkg</span> <span class="o">-</span><span class="n">si</span> <span class="o">&amp;&amp;</span> <span class="n">cd</span> <span class="o">-</span>
<span class="n">cd</span> <span class="n">dwm</span> <span class="o">&amp;&amp;</span> <span class="n">makepkg</span> <span class="o">-</span><span class="n">si</span> <span class="o">&amp;&amp;</span> <span class="n">cd</span> <span class="o">-</span>
</pre></div>
</div>
<p><strong>**</strong> snapshot : Packages installed <strong>**</strong></p>
</div>
<div class="section" id="set-up-xorg-dwm">
<h2>7. Set up xorg, dwm</h2>
<p>Edit the config file read by ‘startx’</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vim</span> <span class="o">~/.</span><span class="n">xinitrc</span>
</pre></div>
</div>
<p>Write:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">VBoxClient</span> <span class="o">--</span><span class="n">display</span> <span class="o">--</span><span class="n">clipboard</span>
<span class="n">setxkbmap</span> <span class="n">be</span>
<span class="n">exec</span> <span class="n">dwm</span>
</pre></div>
</div>
<p>Start xorg, and dwm</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">startx</span>
</pre></div>
</div>
<p>dwm starts up
alt-enter to open st session
show all possible screen resolutions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xrandr</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dwm</span> <span class="o">-</span><span class="n">v</span>
</pre></div>
</div>
<p>output: dwm-6.1</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">st</span> <span class="o">-</span><span class="n">v</span>
</pre></div>
</div>
<p>output: st 0.7</p>
<p>The latter versions are identical to the effie setup</p>
<p>Shutdown VM</p>
<p>Windows Command Prompt:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">VBoxManage</span> <span class="n">setextradata</span> <span class="s2">&quot;yeba&quot;</span> <span class="s2">&quot;CustomVideoMode1&quot;</span> <span class="s2">&quot;1600x900x24&quot;</span>
</pre></div>
</div>
<p>Start vm</p>
<p>Set video resolution at startup</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudoedit</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">default</span><span class="o">/</span><span class="n">grub</span>
</pre></div>
</div>
<p>Find the line starting with ‘GRUB_CMDLINE_LINUX_DEFAULT=’ and change it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GRUB_CMDLINE_LINUX_DEFAULT</span><span class="o">=</span><span class="s2">&quot;quiet video=1600x900&quot;</span>
</pre></div>
</div>
<p>Update grub with the new config</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">grub</span><span class="o">-</span><span class="n">mkconfig</span> <span class="o">-</span><span class="n">o</span> <span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">grub</span><span class="o">/</span><span class="n">grub</span><span class="o">.</span><span class="n">cfg</span>
</pre></div>
</div>
<p>Auto-login on TTY1:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">systemctl</span> <span class="n">edit</span> <span class="n">getty</span><span class="nd">@tty1</span>
</pre></div>
</div>
<p>add lines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Service]
ExecStart=
ExecStart=-/usr/bin/agetty --autologin bert --noclear %I $TERM
</pre></div>
</div>
</div>
<div class="section" id="personal-tools-and-config">
<h2>8. Personal tools and config</h2>
<dl class="docutils">
<dt>::</dt>
<dd>mkdir ~/tools &amp;&amp; cd ~/tools
git clone <a class="reference external" href="https://github.com/bergoid/lswrappers.git">https://github.com/bergoid/lswrappers.git</a>
git clone <a class="reference external" href="https://github.com/bergoid/rabot.git">https://github.com/bergoid/rabot.git</a>
git clone <a class="reference external" href="https://github.com/bergoid/gt.git">https://github.com/bergoid/gt.git</a>
git clone <a class="reference external" href="https://github.com/bergoid/preppy.git">https://github.com/bergoid/preppy.git</a>
git clone <a class="reference external" href="https://github.com/bergoid/avtools.git">https://github.com/bergoid/avtools.git</a>
git clone <a class="reference external" href="https://github.com/bergoid/dotfiles.git">https://github.com/bergoid/dotfiles.git</a>
dotfiles/install_dotfiles</dd>
</dl>
<p>Do manually:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">~/</span><span class="n">tools</span><span class="o">/</span><span class="n">misc</span>
<span class="o">~/.</span><span class="n">gtpresets</span>
<span class="o">~/.</span><span class="n">ssh</span>
</pre></div>
</div>
<p>youtube-dl without pacman:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">curl</span> <span class="o">-</span><span class="n">L</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">yt</span><span class="o">-</span><span class="n">dl</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">downloads</span><span class="o">/</span><span class="n">latest</span><span class="o">/</span><span class="n">youtube</span><span class="o">-</span><span class="n">dl</span> <span class="o">-</span><span class="n">o</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">youtube</span><span class="o">-</span><span class="n">dl</span>
<span class="n">sudo</span> <span class="n">chmod</span> <span class="n">a</span><span class="o">+</span><span class="n">rx</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">youtube</span><span class="o">-</span><span class="n">dl</span>
</pre></div>
</div>
<p>Install knockd &amp; reflector</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">pacman</span> <span class="o">-</span><span class="n">Syu</span> <span class="n">knockd</span> <span class="n">reflector</span>
</pre></div>
</div>
<p>Update mirrorlist:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">reflector</span> <span class="o">--</span><span class="n">age</span> <span class="mi">6</span> <span class="o">--</span><span class="n">fastest</span> <span class="mi">64</span> <span class="o">--</span><span class="n">protocol</span> <span class="n">https</span> <span class="o">--</span><span class="n">sort</span> <span class="n">rate</span> <span class="o">--</span><span class="n">save</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">pacman</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">mirrorlist</span>
</pre></div>
</div>
<p>Set remote URLS to ssh protocol:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">remote</span> <span class="nb">set</span><span class="o">-</span><span class="n">url</span> <span class="n">origin</span> <span class="n">github_bergoid</span><span class="p">:</span><span class="n">bergoid</span><span class="o">/</span><span class="n">anthos</span><span class="o">.</span><span class="n">git</span>
<span class="c1"># etc ...</span>
</pre></div>
</div>
<p><strong>**</strong> snapshot : Xorg, dwm, personal tools &amp; config <strong>**</strong></p>
<blockquote>
<div><dl class="docutils">
<dt>Copy from effie:</dt>
<dd>~/notes.txt
~/cheatsheet.txt</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="set-up-webserver-and-host-guest-connectivity">
<h2>9. Set up webserver and host-&gt;guest connectivity</h2>
<dl class="docutils">
<dt>/home/bert/prj/webserver contains:</dt>
<dd>etc/lighttpd.conf
www/index.html</dd>
<dt>sudo -i</dt>
<dd>cd /srv &amp;&amp; rm -rf *
mkdir log
ln -s /home/bert/prj/webserver repo
ln -sf /etc/lighttpd.conf /srv/repo/etc/lighttpd.conf
chmod 755 /home/bert</dd>
<dt>/home/bert/prj/webserver/etc/lighttpd.conf:</dt>
<dd><dl class="first docutils">
<dt>server.modules = (</dt>
<dd>“mod_access”,
“mod_accesslog”,
)</dd>
</dl>
<p>server.port = 80
server.username = “http”
server.groupname = “http”
server.document-root = “/srv/repo/www”
server.errorlog = “/srv/log/error.log”
accesslog.filename = “srv/log/access.log”
dir-listing.activate = “enable”
index-file.names = ( “index.html” )
mimetype.assign = (</p>
<blockquote class="last">
<div>“.html” =&gt; “text/html”,
“.txt” =&gt; “text/plain”,
“.css” =&gt; “text/css”,
“.js” =&gt; “application/x-javascript”,
“.jpg” =&gt; “image/jpeg”,
“.jpeg” =&gt; “image/jpeg”,
“.gif” =&gt; “image/gif”,
“.png” =&gt; “image/png”,
“” =&gt; “application/octet-stream”
)</div></blockquote>
</dd>
<dt>/home/bert/prj/webserver/www/index.html:</dt>
<dd>Hello there!</dd>
</dl>
<p>sudo systemctl start lighttpd.service
sudo systemctl status lighttpd.service
sudo systemctl enable lighttpd.service</p>
<p>curl localhost</p>
<p>Configure static IP address 192.168.236.20 and gateway 192.168.236.2:</p>
<p>sudo ip link set enp0s8 down</p>
<dl class="docutils">
<dt>sudoedit /etc/netctl/enp0s8</dt>
<dd>Description=’yeba static ip address’
Interface=enp0s8
Connection=ethernet
IP=static
Address=(‘192.168.236.20/24’)
Gateway=(‘192.168.236.2’)</dd>
</dl>
<p>sudo netctl start enp0s8
sudo netctl enable enp0s8</p>
<p>–&gt; Visit 192.168.236.20 with browser on host OS</p>
<p>Tools for rp0w:</p>
<blockquote>
<div>sudo pacman -Syu dosfstools wpa_supplicant qemu-headless qemu-headless-arch-extra</div></blockquote>
<p>Tools for React development:</p>
<blockquote>
<div>sudo pacman -Syu npm
sudo npm install -g create-react-app</div></blockquote>
<p>AUR helper:</p>
<dl class="docutils">
<dt>sudo -i</dt>
<dd>git clone <a class="reference external" href="https://aur.archlinux.org/pakku.git">https://aur.archlinux.org/pakku.git</a>
cd pakku
makepkg -si</dd>
</dl>
<p><strong>**</strong> CURRENT STATE <strong>**</strong></p>
</div>
<div class="section" id="further-config">
<h2>10. Further config</h2>
<p>TODO:</p>
<p>dwm monocle mode</p>
<p>autostart tmux 2 panes in every st terminal</p>
<p>tmux scrollback</p>
<p>change xorg clipboard</p>
<p>set vim yank buffer to xorg clipboard</p>
<p>bidir clipboard host/guest OK?</p>
</div>
</div>

    </div>
    <div id="footer">
    
    
        Footer? What footer?

    </div>
</body>
</html>
